<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- index.html과 동일한 API 기본 주소 규칙을 사용합니다. -->
    <meta name="api-base-url" content="" />
    <title>기록 · Backend Engineer</title>
    <link rel="icon" href="favicon.svg" />
    <link rel="stylesheet" href="assets/style.css" />
  </head>
  <body>
    <!-- Shared navigation. -->
    <div id="siteHeader" data-show-auth="true"></div>

    <main class="container page">
      <section class="reveal" data-delay="0.05">
        <p class="eyebrow">Notes</p>
        <h1 class="page-title">기록</h1>
        <p class="page-desc">
          작업/학습/회고를 짧게 남기는 공간입니다. 나중에 다시 꺼내 쓸 수 있는 기록에 집중합니다.
        </p>
      </section>

      <!-- Writer-only controls (Supabase allowlist). -->
      <section class="section reveal" data-delay="0.08" id="writerControls" style="display: none;">
        <div class="card">
          <h3>글 관리(작성자 전용)</h3>
          <p class="page-desc">
            새 글을 작성하거나 기존 글을 수정/삭제할 수 있습니다. 공개 범위는 <code>published</code>로 제어합니다.
          </p>
          <form id="postForm" class="section" autocomplete="off">
            <div class="field">
              <label for="postSlug">슬러그</label>
              <input id="postSlug" type="text" placeholder="예: payment-retry-outbox" />
            </div>
            <div class="field">
              <label for="postTitle">제목</label>
              <input id="postTitle" type="text" placeholder="제목" />
            </div>
            <div class="field">
              <label for="postCategory">카테고리</label>
              <input id="postCategory" type="text" placeholder="예: Engineering" />
            </div>
            <div class="field">
              <label for="postDate">작성일</label>
              <input id="postDate" type="date" />
            </div>
            <div class="field">
              <label for="postExcerpt">요약</label>
              <input id="postExcerpt" type="text" placeholder="카드에 보일 짧은 소개" />
            </div>
            <div class="field">
              <label for="postContent">본문</label>
              <textarea id="postContent" rows="10" placeholder="본문(plain text 또는 markdown)"></textarea>
            </div>
            <div class="field">
              <label>
                <input id="postPublished" type="checkbox" />
                공개
              </label>
            </div>
            <div class="hero-actions">
              <button class="button primary" type="submit">저장</button>
              <button class="button ghost" type="button" id="postReset">초기화</button>
            </div>
            <p class="home-muted" id="postStatus" style="margin-top: 10px;"></p>
          </form>
        </div>
      </section>

      <!-- Blog cards are generated from API (/api/posts). -->
      <section class="blog-grid section reveal" data-delay="0.1" id="blogList"></section>
    </main>

    <footer class="site-footer">
      <div class="container footer-row">
        <span>짧고 명확한 기록을 남깁니다.</span>
      </div>
    </footer>

    <script src="assets/header.js"></script>
    <script src="assets/app.js"></script>
    <script src="assets/supabase-config.js"></script>
    <script src="assets/supabase.js"></script>
    <script src="assets/auth.js"></script>
    <script src="assets/blog.js"></script>
  </body>
</html>
